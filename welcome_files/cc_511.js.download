(function(){var n="0.2.1",t,a="undefined",e=25,r=parseInt(1e3/e),i=t,o={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"511",instanceID:"externalConf###Instanceid"},u=function(n){return typeof n!==a},c="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=u(window[c])&&1==window[c];var A=function(){return s.instanceID},f="_HistatsCounterGraphics_",d,g=function(){return f+s.counterID},l=function(n){return!("string"!=typeof n||""==n)},h=function(){try{s.DEBUG_MODE&&u(console)&&console.log.apply(this,arguments)}catch(n){}},v=function(a,e){var o=a||{};try{var c=function(n){var t="autostart";return"undefined"!=typeof n[t]&&n[t]===!0},A={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:c(o),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},f=function(){return A.INSTANCE_ID},l=100,v=1,w=function(){return e.document},m=function(n){return u(n)&&!!w().getElementById(n)},p=function(n){i=e.setTimeout(n,r)},b=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||p,C=e["Date"]||{},S=function(n,t){for(var a in n)t.hasOwnProperty(a)&&(t[a]=n[a])};o.getInstanceID=f;var T=g();o.IS_HISTATS_CANVAS=!0,o.globalObjectName=T,o.$window=e;var x=function(n){return m(n)?w().getElementById(n):t},B={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},N={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:t,customization:{}},I={domCanvasObject:null,canvas2dContext:null,canvasProperties:B},E=function(){var n={},a=n.hasOwnProperty,e=0,r=0,i={blockMessages:!1,recordMessages:!1,messageLog:[],printMessages:!1,messagePassedCount:0,subscribersCount:0,topicsCount:0,_topics:n},o=function(t){return a.call(n,t)},s=function(t){return i.printMessages&&console.log(f(),"addTopic",t),r++,i.topicsCount++,r>50&&h(f(),"Lot of topics registered!",t),n[t]=[]},u=function(t){return n[t]},c=function(t,a,r){i.printMessages&&console.log(f(),"subscribe",t,a,r),i.recordMessages&&i.messageLog.push(["subscribe",t,a,r]),r=r||l,o(t)||s(t);var c=u(t).push({callback:a,priority:a})-1;return e++,i.subscribersCount++,e>50&&h(f(),"Lot of topics registered!",t),{remove:function(){delete n[t][c]}}},A=function(n,t){var a="no-topic-found";n!=a&&d(a,{topic:n,info:t})},d=function(a,e){if(i.messagePassedCount++,i.printMessages&&console.log(f(),"publish",a,e),i.recordMessages&&i.messageLog.push(["publish",a,e]),!i.blockMessages)return o(a)?(n[a].slice().sort(function(n,t){return n.priority-t.priority}).forEach(function(n){n.callback(e!=t?e:{})}),void 0):(A(a,e),void 0)},g=function(n,t){b(function(){d(n,t)})};return{subscribe:c,publish:d,publishAsync:g,debugObj:i}}(),O=function(){return s.counterID},F=function(){var n="siteId";return o[n]=o[n]||0},_=function(){var n="main_div_name";return o[n]||"histats_counter_"+F()+"_"+O()},y=[],D=function(){return d=_(),d},P=function(){return D()+"_canvas"},R=function(){return"http://www.histats.com/viewstats/?sid="+F()+"&ccid="+O()},k=function(){e.location=R()},U=function(){if(1==I.canvasProperties.doMouseOverOut){var n=K().canvasProperties;n.yBase=2,n.xBase=2,n.shadowOffsetX=0,n.shadowOffsetY=0}K().domCanvasObject.style.cursor="pointer"},Q=function(){if(1==I.canvasProperties.doMouseOverOut){var n=K().canvasProperties;n.yBase=0,n.xBase=0,n.shadowOffsetX=2,n.shadowOffsetY=2}},L=function(){var n=K(),t=n.canvasProperties,a=n.canvas2dContext;a.shadowOffsetX=t.shadowOffsetX,a.shadowOffsetY=t.shadowOffsetY,a.shadowBlur=t.shadowBlur,a.shadowColor="rgba(0,0,0,0.2)"},M=function(){return x(D())},G=function(){var n=!!M();return n},j=function(){try{if(!G())return E.publish("error",{msg:"validateDomcontainer not found"}),void 0;var n=M(),t=K().canvasProperties,a='<canvas id="'+P()+'" width="'+t.w+'" height="'+t.h+'" ></canvas>',r='<a href="'+R()+'" target="_blank">'+a+"</a>";n.innerHTML=r,K().domCanvasObject=x(P());var i=K().domCanvasObject;K().canvas2dContext=i.getContext("2d"),"addEventListener"in e?(i.addEventListener("mouseover",function(){U()}),i.addEventListener("mouseout",function(){Q()})):i.onclick=function(){k()}}catch(o){h(f(),"drawCanvas",o)}},q=function(){try{if(A.ANIMATION_STARTED)return;if(A._STOPPED)return;E.publish("draw-callback-requested-reconfiguration",{}),E.publish("starting_pre",{context:o}),A.ANIMATION_STARTED=!0,E.publish("started",{context:o}),E.publish("drawcanvas_pre",{context:o}),j(),E.publish("drawcanvas_post",{context:o}),V(),E.publish("animationLoop_started",{context:o})}catch(n){h(f(),"startNow",n,n.message)}},X=function(n,t,a){t.addEventListener?t.addEventListener(n,a,!1):t.attachEvent?t.attachEvent("on"+n,a):t[n]=a},W=function(){try{E.publish("appendedStart",{context:o,type:"animFrame"}),b(q)}catch(n){h(f(),"startAsap",n.message,n)}},z=function(n,t){y.push({name:n,callback:t})},J=function(){},H=function(){y.forEach(function(n){n.callback(o.getCanvas2dContext(),N,K())})},Y=function(){u(i)&&e.clearTimeout(i)},V=function(){A._STOPPED||b(function(){tn(H),A.ANIMATION_RUNNING_STATUS&&V()})};E.subscribe("setAnimationProperties",function(n){S(n,N)}),E.subscribe("draw-callback-publish-reconfiguration",function(n){try{n.canvasCallbacks.forEach(function(n){y.push({name:n.name,callback:n.cb,priority:n.priority})}),y=y.slice().sort(function(n,t){return n.priority-t.priority})}catch(t){h(f(),"animationLoop",t.message,t)}}),E.subscribe("configuration-changed",function(n){y=[],E.publish("draw-callback-requested-reconfiguration",{})});var Z=function(n){var t=n!=A.ANIMATION_RUNNING_STATUS;return t&&(0==A.ANIMATION_RUNNING_STATUS&&1==n,1==A.ANIMATION_RUNNING_STATUS&&0==n&&Y(),A.ANIMATION_RUNNING_STATUS=n),t},K=function(){return I},$=function(){var n=!1;0==N.frameCounter&&E.publish("FIRST-FRAME",{});var t=C.now(),a=t-N.msLastFrameDrawn;if(a>N.msPerFrame){var e=a%N.msPerFrame;N.msLastFrameDrawn=t-e,n=!0}return n},nn=function(){if(!(N.animation_duration_inFrames<1)){var n=N.animation_duration_inFrames+N.waitframesBetweenTwoAnimations;N.currentLoopFrame=N.frameCounter%n;var t=0==N.currentLoopFrame,a=N.currentLoopFrame>=N.animation_duration_inFrames;t&&(N.isInAnimationTransition=!0,E.publish("drawing-triggered-animation-start",N)),a&&N.isInAnimationTransition&&(N.isInAnimationTransition=!1,E.publish("drawing-triggered-animation-end",N))}},tn=function(n){var t=$();t&&(N.frameCounter++,nn(),n())},an=function(n){return n(o.getCanvas2dContext())},en=function(){var n=17,t=2,a=1,e=K().canvasProperties,r=0;e.hasShadow&&(r=r+t+a),e.hasLabel&&(e.h=e.h+n),e.w=e.w+r,e.h=e.h+r},rn=function(n){S(n,K().canvasProperties),en()};E.subscribe("setCanvasProperties",rn,10);var on=function(){o.onCanvas2dContext(function(n){var t=K().canvasProperties;n.clearRect(0,0,t.w,t.h),t.hasShadow&&L()})};E.subscribe("clear-canvas-rectangle",on,10);var sn=function(n,t){K().hasShadow&&(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowBlur=0,n.shadowColor="transparent")},un=function(n,a){a.autoTriggerTextChange_onFrame!==t&&a.currentLoopFrame==a.autoTriggerTextChange_onFrame&&E.publish("drawing-change-text",{})},cn=function(n){E.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:sn,priority:14,name:"stopApplyingShadowOnCanvas"},{cb:un,priority:5,name:"autoUpdateText"}]})};E.subscribe("draw-callback-requested-reconfiguration",cn,15),o.__CODE_VERSION=n,o.getCanvasObject=K,o.getCanvas2dContext=function(){return K().canvas2dContext},o.onCanvas2dContext=an,o.getXYCanvas=function(){return{x:K().canvasProperties.xBase,y:K().canvasProperties.yBase}},o.addDrawCallback=z,o.getCanvasProperties=function(){return K().canvasProperties},o.setCanvasProperties=function(n){for(var t in n)n.hasOwnProperty(t)&&(I.canvasProperties[t]=n[t])},o.updateCanvasProperties=function(n){o.setCanvasProperties(n(K().canvasProperties))},o.getAnimationFrames=function(){return N.frameCounter},o.getAnimationControl=function(){return N},o.setAnimationControl=function(n){for(var t in n)n.hasOwnProperty(t)&&(N[t]=n[t])},o.start=W,o.changeRunningStatus=Z,o.getRunningStatus=function(){return A.ANIMATION_RUNNING_STATUS},o.eventBus=E,o.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.bars={},a=!1,e=3,r=1,i=0,o=[2,5,10];n.eventBus.subscribe("set-bars-params",function(t){A(t),n.eventBus.publish("configuration-changed",{})});var s=[],u={xBase:5,yBase:13,hMin:2,hMax:10,w:4,barsColours:[["#3e8bfd","#2572e4"],["#feb23f","#dc901d"],["#d83f3f","#b41b1b"]],parent:n},c=function(){return u},A=function(n){for(var t in n)n.hasOwnProperty(t)&&(u[t]=n[t])},f=function(n){a=!0;for(var t=0;t<e;t++)n.push({x:t*(u.w+1),y:0,width:u.w,height:o[t],animateDirection:r,gradient:null,gradientStart:u.barsColours[t][0],gradientEnd:u.barsColours[t][1]})},d=function(t){var a=.5,e=t.height,o=n.getXYCanvas();t.animateDirection==r&&e>=u.hMax?t.animateDirection=i:t.animateDirection==i&&e<=u.hMin&&(t.animateDirection=r),e+=a*(t.animateDirection==r?1:-1),t.y=u.yBase-e+o.y,t.height=e},g=function(t){return function(a){var e=n.getXYCanvas();a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0,a.beginPath(),a.fillStyle=v(t,a),a.fillRect(e.x+u.xBase+t.x,t.y,t.width,t.height)}},l=function(t){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:h,priority:20,name:"bars_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",l,11);var h=function(){a||f(s);for(var t in s)if(s.hasOwnProperty(t)){var e=s[t];d(e),n.onCanvas2dContext(g(e))}},v=function(t,a){var e=n.getXYCanvas(),r=u.xBase,i=a.createLinearGradient(r+t.x+e.x,t.y,r+t.x+t.width,t.height+t.y);return i.addColorStop(0,t.gradientStart),i.addColorStop(1,t.gradientEnd),i};t.getBoxProperties=c,t.setBoxProperties=A,t.transformBarsColour=function(n){barsColours=n(u.barsColours)},t.draw=h}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var t=n.effectLightLine={},a=function(n,t){e.colorStops.push({position:n,colour:t})},e={x:0,y:0,width:0,height:0,colorStops:[]},r=function(n){var t=n.createLinearGradient(e.x,e.y,e.x+e.width,e.y);e.colorStops.forEach(function(n){t.addColorStop(n.position,n.colour)}),n.fillStyle=t,n.fillRect(e.x,e.y,e.width,e.height)};t.addColorStop=a,t.draw=r,t.getProperties=function(){return e},t.setProperties=function(n,t,a,r){e.x=n,e.y=t,e.width=a,e.height=r}}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a={main:"",source:t,loaded:!1};a.main="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF8AAAAQCAMAAABHnFN+AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAL9UExURQAAAApFnic0SwxEmjExMQBJuQBKuQwwZQAwdgAwdv///wAzfwA1hAFJtgAwdwAyfAAxegFKuAAwdgA0ggAzfgA1ggAyewAxeQFCpAA2hgE0gAE0gQE1gwEzfQExeAE2hQA7kgE2hwFKtwBAnwBHsQA+mgFItAFGrwBEqgFBogA9lwFFrAFDpwFKuQA/nAA5jwFCowBCpQA8lgBGrQA/nQBEqAFJtQA5jQA3iwBDpgA9mQA6kQA7lLq/yAA3igFGrgA6kAAmXwFBoQFAoAFIswFIsgA8lQFHsAA3iQFEqQBFqwApZAAucwA3iAE9mAA/ngAsbwA5jgA4jO3u7wE3hwA7kwA6jwE+mwE4igE5jABAoAAfTwAUNQE8lAAwegA+m7rG2QAtcgAxfHWJpgAvdQA9mAArbAAudLrBzHWDmAA1hQAdSrm8wgAjV8vO07m7wNvd4O3w9QArbUNsqQA6kgA6kwAyfQAkWwA2h2WJwDJiqgA0gQAYPgAbQwAbRQAcR+3u8QAlXIaMlXaEmgAfTSFGfkNfiQAhU+3v87rD0DJksAAqaUJYeNzc37q9xAA0gABBogApZgAweSFHgQAXOTJouCE2V0NbgENooDJbmgAyfnaMrCFUoSEyTQA0g5iuzoefw4eewAAtcXWOshAxZHWFnUNZe0NhkNze4gATL8vQ2TJGZpekt3WGn2RvgBBFk0JPZHWAkBAqVKm50RBPrZefrAAPJ7rAylRcaFR9u1SAwQASLRAgOgAeS7q/xwBCpjJSgxBGlwA7lpiw1DJjrLnF2AAnYlR4rxApToaUq3WOtUNurnaZzXaKqUJXeCE4W2WFthAkQ0JbgjFBWiFQl0NPYwBBo3aRuTJYkkNpo1Roh5eZniE6YHaTwFNkf3aHokNjlHWBk5eboZinv2V5l8vU4xBCjWWEtEJeiMvMz6i0yAAweHaWx3V5fwAvd0NMW7rE1KiwvBBNqoaQoUJgjWWLxMvV5RBNqSFDdxAfNiFRlzJPe6ixvtzh6UNurQGgsE8AAAAKdFJOUwCOJ4UfcmaFcmbFU8DjAAADFElEQVQ4jbXUd0xTQRwH8DrRb5GWgoobLSBWpYxiy+Y5ELVItc5SBURAQagCspGtgFSmC1C0Ag5QVFBABdx777333lvjPfA/Q2xCuOTGL3f5vLzf5X4MRkctrd5d2ewuLFYvXSazew+dzj01Nft06zvBxdl+imj8VOE4/iRHG339ibbTnMx5vLHWhoaTTUwErlzusKEDBpjq6ZlZDRpkOcrYePTAgRYO/fuPNDAYMdzIaEgn0tozGB04Leb309Zux+C0qD+4aT/Dw2Nl57Uea6Mq1jjTvmNw8D7bRt+64ESke3N9FbDeNxWpewEW7WsCK2wa/flX4BHSXD8LOL+4CnZuOz6IHfnlZ3OAUxedbINvFXiLvLBphTtXcDBCQPuX016m1Vt+qfn0frSDReWuXZVLTy41+K8/BtiUKkXdIkAsXJmC5QDWPX5ExjWrN5OR712IQyHEFxSS6HfkPGBeRH0aPZH4gIUaPt3siC/xe4sNpUDgwweQzgHuFkNalXcNOOZsqsd9Aiz5qfoFZSBSyiugVALkTKQa/o1XSpIfYLEWsDWW9KQ4VO+8jzuJUPiz8jEngG+qZ/scCfIAckvfdivxMQ5vqvFspwLH1fAvyRWNfjJQEh+I69QGJBbdw+zbCJT4laGOw4uoCS/DO8/v5MSPr1KkA+npqAuwQ74a/umwugafAqRU0A7AaxvJ2Gwk3qTvgqx0jgBXS0jw2WcJncy55CefLsQsySx4qeEvz7Jr8JOgvKAK3a5AcWwCsA3F8Vuk5DMJYS45kCaPIUHKerILRWk8sJD4KjX8oFz5YYn/Rn8qOjpgmZzyE0lizhX5uO1eFbOA6homX3UmepGO+cxlR7PDqdw9/i9e1+7ZGMth1sb4+iZRUVSs+K+v1ZSvG+QzI2NmECfUU8xWibtNshGxxUyRjtiTHRqubz/dNzvP3lAWwmI6uU5c3cXPWzCeGTVOJhPau5vwzTN5fNcGvxNDQ436IxTy6fpDuhPPfL83XX/crQ0F5P3KuLJMMyszM6tRxpaWxv++3zaMthotWN9atf4DI8lkqE4aC/UAAAAASUVORK5CYII=";var e=function(t){var e=a.source=new Image;e.onload=function(){a.loaded=!0,n.eventBus.publish("background-image-loaded",a),n.eventBus.publish("configuration-changed",{})},e.src=a.main};n.eventBus.subscribe("FIRST-FRAME",e,5),n.image_base64_src=a}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a=n.counter={};a.ID="511",a.properties={w:95,h:16,hasShadow:!0};var e=!1,r={backgroundImageObject:t},i={xBase:3,yBase:13,barsColours:[["#8ab9fd","#117ae3"],["#fec745","#eb8a26"],["#76fd1c","#3db31c"]]},o={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110};n.eventBus.publish("setCanvasProperties",a.properties),n.eventBus.publish("setAnimationProperties",o),n.eventBus.publish("set-bars-params",i);var s={light:{x:0,y:0,w:10,h:16,movementsPerFrame:1,xStart:0,xEnd:85}},u=function(n){var t=s;t.light.movementsPerFrame=(s.light.xEnd-s.light.xStart)/o.animation_duration_inFrames};u(o.animation_duration_inFrames);var c=function(t){var a=s,e=n.getXYCanvas();a.light.x+=a.light.movementsPerFrame;var r=t.createLinearGradient(e.x+a.light.x,e.y+a.light.y,e.x+a.light.x+a.light.w,e.y+a.light.y);r.addColorStop(0,"rgba(255,255,255,0)"),r.addColorStop(.5,"rgba(255,255,255,1)"),r.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=r,t.fillRect(e.x+a.light.x,e.y+a.light.y,a.light.w,a.light.h)},A=function(t,a){n.eventBus.publish("clear-canvas-rectangle",{});var e=n.getXYCanvas();t.drawImage(r.backgroundImageObject.source,e.x,e.y)},f=function(n,t){var a=s;t.isInAnimationTransition?c(n):a.light.x=a.light.xStart},d=function(a){r.backgroundImageObject!=t&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:A,priority:10,name:"drawBackground"},{cb:f,priority:17,name:"executeAnimationTransition"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",d,13),n.eventBus.subscribe("background-image-loaded",function(n){r.backgroundImageObject=n},13),n}.call(o),A.AUTOSTART&&o.start()}catch(An){}return o},w="base.js",m=window,p="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=u(window[p])&&window[p]===!0,window[g()]=v,window["histats_canvascounters_"+w]=v}).call(this);